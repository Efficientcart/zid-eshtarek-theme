{#
  Sticky Subscribe CTA — Subscription-only theme version

  Shows a fixed bottom bar when user scrolls past the plan selector.
  Displays product thumbnail, name, price, and a Subscribe button
  that scrolls back to the plan selector.
#}
<div
  id="sticky-cta"
  class="bg-secondary border-border-light fixed inset-x-0 bottom-0 z-40 hidden border-t px-4 py-4 transition-transform transition-discrete duration-300 md:px-16 starting:translate-y-full"
  data-sticky-cta
  aria-hidden="true"
>
  <div class="theme-container">
    <div class="flex items-center gap-4">
      {# Product Image #}
      <div class="size-16 shrink-0 overflow-hidden rounded">
        {% if product.images and product.images|length > 0 %}
          {% set img_src = product.images[0].image.thumbnail if product.images[0].image else product.images[0] %}
          <img
            src="{{ image_url(img_src, w=128, q=85, f='auto') }}"
            alt="{{ product.name }}"
            class="size-full object-cover"
            data-sticky-cta-image
          />
        {% else %}
          <div class="bg-background size-full"></div>
        {% endif %}
      </div>

      {# Product Info #}
      <div class="flex min-w-0 flex-1 items-center gap-4">
        <div class="min-w-0 flex-1">
          <h3
            class="text-foreground text-sm font-medium truncate"
            data-sticky-cta-name
          >
            {{ product.name }}
          </h3>
          {# Selected plan summary (populated by JS) #}
          <p
            class="text-muted text-xs truncate"
            data-sticky-cta-plan
          ></p>
        </div>

        {# Price #}
        <div class="shrink-0">
          <span
            class="text-foreground text-sm font-semibold"
            data-sticky-cta-price
          >
            {{ product.formatted_sale_price if product.formatted_sale_price else product.formatted_price }}
          </span>
        </div>
      </div>

      {# Subscribe Button — scrolls to plan selector #}
      <button
        type="button"
        class="btn btn-filled btn-lg shrink-0"
        data-sticky-cta-subscribe
        onclick="document.getElementById('eshtarek-plan-selector')?.scrollIntoView({ behavior: 'smooth', block: 'center' })"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="hidden sm:block"
        >
          <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
          <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
          <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
        </svg>
        <span>{{ _("Subscribe") }}</span>
      </button>
    </div>
  </div>
</div>
