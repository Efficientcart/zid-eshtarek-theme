<section
  section-id="{{ sectionId }}"
  class="relative overflow-hidden"
  data-variant="{{ settings.style_variant | default('default') }}"
>
  <!-- Carousel with data attributes for JS initialization -->
  <div
    class="embla w-full"
    data-carousel
    data-carousel-loop="true"
    data-carousel-autoplay="{{ settings.autoplay_delay | default(4000) if settings.autoplay_enabled | default(true) else '' }}"
    data-carousel-fade="{{ 'true' if settings.transition_effect | default('fade') == 'fade' else 'false' }}"
  >
    <div
      class="embla__container h-full"
      data-carousel-viewport
    >
      {% for slide in settings.slides or [] %}
        <div class="embla__slide relative flex items-center justify-center overflow-hidden">
          <!-- Background image for this slide -->
          <div
            class="absolute inset-0 -z-10 bg-cover bg-no-repeat"
            style="background-image: url('{{ slide.background_image }}'); background-position: {{ slide.background_position | default('center') }}"
          >
            <div
              class="bg-primary absolute inset-0"
              style="opacity: {{ slide.overlay_opacity | default(20) / 100 }}"
            ></div>
          </div>

          <div
            class="{% if settings.style_variant == 'compact' %}py-6 md:py-32{% else %}py-6 md:py-0{% endif %} w-full px-4 md:px-16"
          >
            <!-- Content for this slide -->
            <div
              class="theme-container flex max-w-[960px] flex-col gap-20"
              style="text-align: {{ slide.text_alignment | default('start') }}"
            >
              <div class="flex max-w-[768px] flex-col gap-6">
                <div class="flex flex-col gap-4">
                  {% if slide.badge_text %}
                    <span class="text-foreground text-tagline">{{ slide.badge_text }}</span>
                  {% endif %}
                  <h2 class="text-foreground text-h3 md:text-h1">{{ slide.heading }}</h2>
                  {% if slide.description %}
                    <p class="text-foreground text-h6">{{ slide.description }}</p>
                  {% endif %}
                </div>
                {% if slide.button_text %}
                  <div class="flex gap-4">
                    <a
                      href="{{ slide.button_url | default('#') }}"
                      class="btn btn-filled btn-lg"
                    >
                      {{ slide.button_text }}
                    </a>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Dots -->
    {% if settings.slides and settings.slides | length > 1 and settings.show_dots %}
      <div
        class="embla__dots pointer-events-auto absolute bottom-8 left-1/2 z-10 flex -translate-x-1/2 gap-1 rounded-full bg-white/10 p-1 backdrop-blur-sm"
        data-carousel-dots
      ></div>
    {% endif %}
  </div>

  <!-- prettier-ignore-start -->
    <style>
        [section-id="{{ sectionId }}"] .embla__slide {
            min-height: {{ settings.min_height_mobile | default(700) }}px;
        }

        @media (min-width: 768px) {
            [section-id="{{ sectionId }}"] .embla__slide {
                min-height: {{ settings.min_height_desktop | default(700) }}px;
            }
        }

        {% if settings.transition_effect == 'fade' %}
            /* Fade effect: use grid layout */
            [section-id="{{ sectionId }}"] .embla__container {
                display: grid;
                grid-auto-flow: column;
                grid-auto-columns: 100%;
                height: 100%;
            }
        {% else %}
            /* Slide effect: use flex layout */
            [section-id="{{ sectionId }}"] .embla__container {
                display: flex;
            }
        {% endif %}
    </style>
  <!-- prettier-ignore-end -->
</section>

{# Carousel is now initialized by main.js using data-carousel attributes #}
